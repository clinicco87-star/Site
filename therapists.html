<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Therapists - Clinic Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/therapists.css">
    <link rel="stylesheet" href="styles/animations.css">
</head>
<body class="therapists-page">
    <!-- Navigation Sidebar (Same as dashboard) -->
    <nav class="sidebar">
        <div class="sidebar-logo">
            <div class="logo-3d">
                <div class="logo-inner">
                    <i class="fas fa-stethoscope"></i>
                </div>
                <div class="logo-text">
                    <h2>Clinic</h2>
                    <p>Management</p>
                </div>
            </div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item" data-page="dashboard">
                <div class="nav-icon">
                    <i class="fas fa-home"></i>
                </div>
                <span class="nav-text">Dashboard</span>
                <div class="nav-glow"></div>
            </li>
            <li class="nav-item active" data-page="therapists">
                <div class="nav-icon">
                    <i class="fas fa-user-md"></i>
                </div>
                <span class="nav-text">Therapists</span>
                <div class="nav-glow"></div>
            </li>
            <li class="nav-item" data-page="clients">
                <div class="nav-icon">
                    <i class="fas fa-users"></i>
                </div>
                <span class="nav-text">Clients</span>
                <div class="nav-glow"></div>
            </li>
            <li class="nav-item" data-page="schedule">
                <div class="nav-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <span class="nav-text">Schedule</span>
                <div class="nav-glow"></div>
            </li>
        </ul>

        <div class="user-profile">
            <div class="user-avatar">
                <div class="avatar-3d">
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
            <div class="user-info">
                <h4 id="adminName">Admin User</h4>
                <p id="adminEmail">admin@clinic.com</p>
            </div>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="page-header">
            <div class="header-left">
                <h1 class="page-title">
                    <i class="fas fa-user-md"></i>
                    <span>Therapist Management</span>
                </h1>
                <p class="page-subtitle">Manage therapists, leaves, and departments</p>
            </div>
            <div class="header-right">
                <button class="header-btn btn-3d" id="addTherapistBtn">
                    <i class="fas fa-plus"></i>
                    <span>Add Therapist</span>
                </button>
                <button class="header-btn btn-3d" id="departmentStatsBtn">
                    <i class="fas fa-chart-pie"></i>
                    <span>Stats</span>
                </button>
            </div>
        </header>

        <!-- Stats Overview -->
        <section class="stats-overview">
            <div class="stats-grid">
                <div class="stat-card glass">
                    <div class="stat-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalTherapists">0</h3>
                        <p>Total Therapists</p>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="onLeaveCount">0</h3>
                        <p>On Leave Today</p>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="availableCount">0</h3>
                        <p>Available Now</p>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="departmentCount">8</h3>
                        <p>Departments</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Department Filter -->
        <section class="department-filter">
            <div class="filter-header">
                <h3><i class="fas fa-filter"></i> Filter by Department</h3>
            </div>
            <div class="department-tags" id="departmentTags">
                <!-- Department tags will be loaded here -->
            </div>
        </section>

        <!-- Therapists Grid -->
        <section class="therapists-section">
            <div class="section-header">
                <h2><i class="fas fa-users"></i> All Therapists</h2>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchTherapists" placeholder="Search therapists...">
                </div>
            </div>
            
            <div class="therapists-grid" id="therapistsGrid">
                <!-- Therapist cards will be loaded here -->
                <div class="empty-state">
                    <i class="fas fa-user-md"></i>
                    <h3>No Therapists Found</h3>
                    <p>Add your first therapist to get started</p>
                    <button class="btn-primary btn-3d" id="emptyAddBtn">
                        <i class="fas fa-plus"></i>
                        Add Therapist
                    </button>
                </div>
            </div>
        </section>

        <!-- Leave Management -->
        <section class="leave-management">
            <div class="section-header">
                <h2><i class="fas fa-calendar-times"></i> Leave Management</h2>
                <button class="btn-secondary" id="addLeaveBtn">
                    <i class="fas fa-plus"></i>
                    Add Leave
                </button>
            </div>
            <div class="leave-calendar" id="leaveCalendar">
                <!-- Leave calendar will be loaded here -->
            </div>
        </section>
         <!-- Copyright Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <p>Designed and maintained by <strong><a href="mailto:alwin4778@gmail.com">Alwin George</a></strong> and <strong>
        <a href="mailto:ssaji5956@gmail.com">Sijo Saji</a></strong></p>
                <p class="copyright">Copyright Â© <span id="currentYear"></span> clinic managenment</p>
        </footer>
    </main>

    <!-- Add Therapist Modal -->
    <div class="modal-overlay" id="addTherapistModal">
        <div class="modal-container modal-3d">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Add New Therapist</h3>
                <button class="modal-close" id="closeAddTherapist">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="therapistForm">
                    <div class="form-group">
                        <label for="therapistName">
                            <i class="fas fa-user"></i> Full Name
                        </label>
                        <input type="text" id="therapistName" required 
                               placeholder="Enter therapist's full name">
                    </div>
                    
                    <div class="form-group">
                        <label for="therapistEmail">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <input type="email" id="therapistEmail" required
                               placeholder="Enter therapist's email">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="therapistDepartment">
                                <i class="fas fa-building"></i> Department
                            </label>
                            <select id="therapistDepartment" required>
                                <option value="">Select Department</option>
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="therapistStatus">
                                <i class="fas fa-toggle-on"></i> Status
                            </label>
                            <select id="therapistStatus" required>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="therapistPhone">
                            <i class="fas fa-phone"></i> Phone Number
                        </label>
                        <input type="tel" id="therapistPhone"
                               placeholder="Enter phone number">
                    </div>
                    
                    <div class="form-group">
                        <label for="therapistNotes">
                            <i class="fas fa-sticky-note"></i> Notes
                        </label>
                        <textarea id="therapistNotes" rows="3"
                                  placeholder="Additional notes..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelTherapist">
                            Cancel
                        </button>
                        <button type="submit" class="btn-primary btn-3d">
                            <i class="fas fa-save"></i>
                            Save Therapist
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

<!-- Leave Management Modal -->
<div class="modal-overlay" id="leaveModal">
    <div class="modal-container modal-3d">
        <div class="modal-header">
            <h3><i class="fas fa-bed"></i> Manage Leave</h3>
            <button class="modal-close" id="closeLeaveModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="leaveForm">
                <div class="form-group">
                    <label for="leaveTherapist">
                        <i class="fas fa-user-md"></i> Therapist
                    </label>
                    <select id="leaveTherapist" required>
                        <option value="">Select Therapist</option>
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="leaveStart">
                            <i class="fas fa-calendar-plus"></i> Start Date
                        </label>
                        <input type="date" id="leaveStart" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="leaveEnd">
                            <i class="fas fa-calendar-minus"></i> End Date
                        </label>
                        <input type="date" id="leaveEnd" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="leaveReason">
                        <i class="fas fa-comment"></i> Reason
                    </label>
                    <select id="leaveReason" required>
                        <option value="vacation">Vacation</option>
                        <option value="sick">Sick Leave</option>
                        <option value="personal">Personal</option>
                        <option value="training">Training</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="leaveNotes">
                        <i class="fas fa-sticky-note"></i> Additional Notes
                    </label>
                    <textarea id="leaveNotes" rows="3"
                              placeholder="Any additional details..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-danger" id="deleteLeave" style="display: none;">
                        <i class="fas fa-trash" style="display: none;"></i>
                        Delete Leave
                    </button>
                    
                    <div class="action-right">
                        <button type="button" class="btn-secondary" id="cancelLeave">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                        <button type="submit" class="btn-primary btn-3d">
                            <i class="fas fa-save"></i>
                            Save Leave
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

    <!-- Therapist Details Modal -->
    <div class="modal-overlay" id="therapistDetailsModal">
        <div class="modal-container modal-3d wide">
            <div class="modal-header">
                <h3><i class="fas fa-user-md"></i> Therapist Details</h3>
                <button class="modal-close" id="closeDetailsModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="therapist-details" id="therapistDetailsContent">
                    <!-- Details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="spinner-3d">
            <div class="spinner-inner"></div>
        </div>
        <p>Loading Therapists...</p>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/therapists.js"></script>
    <script>
        // Update copyright year dynamically
        document.addEventListener('DOMContentLoaded', function() {
            const currentYear = new Date().getFullYear();
            document.getElementById('currentYear').textContent = currentYear;
        });
    </script>
</body>
</html>